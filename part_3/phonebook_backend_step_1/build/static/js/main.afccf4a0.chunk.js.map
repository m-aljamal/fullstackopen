{"version":3,"sources":["components/Person.js","components/CreateNew.js","components/backend.js","components/Message.js","App.js","index.js"],"names":["Person","person","name","number","id","deleteContact","style","margin","marginRight","onClick","CreateNew","handleSubmit","useState","formData","setFormData","handleChange","e","target","value","onSubmit","preventDefault","type","onChange","baseUrl","getAll","a","axios","get","res","data","create","post","response","remove","delete","update","put","Message","message","className","App","persons","setPersons","serchName","setSerchName","setMessage","useEffect","backend","getData","addMessage","setTimeout","checkName","find","window","confirm","map","error","concat","console","log","then","filter","catch","err","per","toLowerCase","includes","length","key","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.afccf4a0.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Person = ({ person: { name, number, id }, deleteContact }) => {\r\n  const handleDelete = () => {\r\n    deleteContact(id, name);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div style={{ margin: \"20px\" }}>\r\n        <span style={{ marginRight: \"15px\" }}>\r\n          {name} {number}\r\n        </span>\r\n        <button onClick={handleDelete}>delete</button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React, { useState } from \"react\";\r\n\r\nconst CreateNew = ({ handleSubmit }) => {\r\n  const [formData, setFormData] = useState({ name: \"\", number: \"\" });\r\n  const { name, number } = formData;\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n  const createNew = (e) => {\r\n    e.preventDefault();\r\n    handleSubmit(formData);\r\n    setFormData({ name: \"\", number: \"\" });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={createNew}>\r\n      <div>\r\n        Name:{\" \"}\r\n        <input type=\"text\" value={name} name=\"name\" onChange={handleChange} />\r\n      </div>\r\n      <div>\r\n        Number:{\" \"}\r\n        <input\r\n          type=\"text\"\r\n          value={number}\r\n          name=\"number\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CreateNew;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\nconst getAll = async () => {\r\n  const res = await axios.get(baseUrl);\r\n  return res.data;\r\n};\r\n\r\nconst create = async (data) => {\r\n  try {\r\n    const res = await axios.post(baseUrl, data);\r\n    return res.data;\r\n  } catch (error) {\r\n    // console.log(error.response.data);\r\n    return error.response.data\r\n  }\r\n};\r\n\r\nconst remove = async (id) => {\r\n  await axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\nconst update = async (id, data) => {\r\n  const res = await axios.put(`${baseUrl}/${id}`, data);\r\n  return res.data;\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  remove,\r\n  update,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Message = ({ message: { message, type } }) => {\r\n  return (\r\n    <div className={type }>\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Person from \"./components/Person\";\nimport CreateNew from \"./components/CreateNew\";\nimport backend from \"./components/backend\";\nimport Message from \"./components/Message\";\nfunction App() {\n  const [persons, setPersons] = useState([]);\n\n  const [serchName, setSerchName] = useState([]);\n\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    const getData = async () => {\n      const res = await backend.getAll();\n\n      setPersons(res);\n    };\n\n    getData();\n  }, []);\n\n  const addMessage = (message, type) => {\n    setMessage({ message, type });\n    setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n  };\n  const handleSubmit = async (value) => {\n    const { name, number } = value;\n\n    const checkName = persons.find((person) => person.name === name);\n\n    if (checkName) {\n      const confirm = window.confirm(\n        `${name} is already added to phonebook, replace the old number with new one? `\n      );\n      if (confirm) {\n        try {\n          const res = await backend.update(checkName.id, { name, number });\n          setPersons(\n            persons.map((person) => (person.id !== checkName.id ? person : res))\n          );\n          addMessage(`Number updated ${number}`, \"update\");\n        } catch (error) {\n          addMessage(\n            `Contact for ${name} has already been removed from server`,\n            \"remove\"\n          );\n        }\n      }\n    } else {\n      try {\n        const res = await backend.create({ name, number });\n        if (res.error) {\n          addMessage(res.error, \"error\");\n        } else {\n          setPersons(persons.concat(res));\n          addMessage(`Added ${name}`, \"add\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  const handleSerch = (e) => {\n    const serchName = persons.filter((per) =>\n      per.name.toLowerCase().includes(e.target.value.toLowerCase())\n    );\n    serchName && setSerchName(serchName);\n  };\n\n  const deleteContact = (id, name) => {\n    const confirm = window.confirm(`delete ${name} ?`);\n    if (confirm) {\n      backend\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter((person) => person.id !== id));\n          addMessage(`removed ${name}`, \"delete\");\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  };\n  return (\n    <div className=\"App\">\n      <h2>Phonebook</h2>\n      {message && <Message message={message} />}\n\n      <div>\n        Serch: <input type=\"text\" onChange={handleSerch} />\n      </div>\n      <h3>Add new </h3>\n      <CreateNew handleSubmit={handleSubmit} />\n\n      <h2>Numbers</h2>\n\n      {serchName.length > 0\n        ? serchName.map((person) => <Person key={person.id} person={person} />)\n        : persons &&\n          persons.map((person) => (\n            <Person\n              key={person.id}\n              person={person}\n              deleteContact={deleteContact}\n            />\n          ))}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}